

## Users on system:
+ There are several text files in the `/etc` directory that contain the account data of the users and groups defined on the system. 
+ For example, to see if a specific user account has been defined on the system, then the place to check is the `/etc/passwd` file.


## `/etc/passwd`:
+ The `/etc/passwd` file defines some of the account information for user accounts. 
+ The following example shows the last five lines of a typical `/etc/passwd` file:
![[Pasted image 20240227185855.png]]
+ Each line contains information pertaining to a single user. The data is separated into fields by colon characters. The following describes each of the fields in detail, from left to right, using the last line of the output of the previous graphic:
	+ **Name**
	+ **Password Placeholder**
	+ **User ID**
	+ **Primary Group ID**
	+ **Comment**
	+ **Home Directory**
	+ **Shell**


### Name:
![[Pasted image 20240227190047.png]]
 + The first field contains the name of the user or the username. 
 + This name is used when logging in to the system and when file ownership is viewed with the `ls -l` command.
 + It is provided to make it easier for regular users to refer to the account, while the system typically utilizes the user ID internally.


### Password Placeholder:
> sysadmin:==x==:1001:1001:System Administrator ..
+ At one time, the password for the user was stored in this location, however, now the `x` in this field indicates to the system that the password is in the `/etc/shadow` file.


### User ID:
> sysadmin:x:==1001==:1001:System Administrator
+ Each account is assigned a user ID (UID). 
+ Usernames are not directly used by the system, which typically defines the account by the UID instead.
+ For example, files are owned by UIDs, not by usernames.


### Primary Group ID:
> sysadmin:x:1001:==1001==:System Administrator 
+ This field indicates that the user is a member of that group, which means the user has special permissions on any file that is owned by this group.


### Comment:
> sysadmin:x:1001:1001:==System Administrator,,,,==:/home/sysadmin:/bin/bash
+ This field can contain any information about the user, including their real name or other useful information.


### Home Directory:
> sysadmin:x:1001:1001:System Administrator,,,,:==/home/sysadmin==:/bin/bash
 + This field defines the location of the user's home directory. 
 + For regular users, this would typically be `/home/username`. 
 + For example, a username of `bob` would have a home directory of `/home/bob`.
+ The root user usually has a different place for the home directory, the `/root` directory.


### Shell:
> sysadmin:x:1001:1001:System Administrator,,,,:/home/sysadmin:==/bin/bash==
+ This field indicates the location of the user's login shell. 
+ By default, the user is placed in this shell whenever they log into a command line environment or open a terminal window.
+ The bash shell `/bin/bash` is the most common shell for Linux users.



----
# Passwords


As previously mentioned, the `/etc/shadow` file contains account information related to the user's password. 
However, regular users can't view the contents of the `/etc/shadow` file for security reasons. 
To view the contents of this file, log in as the administrator (the root account)

A typical `/etc/shadow` file would look similar to the following:
```bash
root@localhost:~# tail -5 /etc/shadow
syslog:*:16874:0:99999:7:::
bind:*:16874:0:99999:7:::
sshd:*:16874:0:99999:7:::
operator:!:16874:0:99999:7:::
sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:30:7:60:15050:
```
Again, each line is separated into fields by colon characters.


### Username:
> ==sysadmin==:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:30:7:60:15050::
+ This field contains the username of the account, which matches the account name in the `/etc/passwd` file.


### Password:
> sysadmin:==\$6\$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0==:16874:5:30:7:60:15050::
+ The password field contains the encrypted password for the account.
+ This very long string is a one-way encryption, meaning that it can't be "reversed" to determine the original password.
+ While regular users have encrypted passwords in this field, ==system accounts== have an asterisk `*` character in this field.


### Last Change:
> sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:==16874==:5:30:7:60:15050::
+ This field contains a number that represents the last time the password was changed. 
+ The number `16874` is the number of days since January 1, 1970 (called the Epoch).
+ This value generates automatically when the user's password is modified. 
+ It is used by the password aging features provided by the rest of the fields of this file.


### Minimum:
> sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:==5==:30:7:60:15050::
+ This field indicates the minimum number of days between password changes.
+ It is one of the password aging fields; a non-zero value in this field indicates that after a user changes their password, the password can't be changed again for the specified number of days, `5` days in this example. 
+ This field is important when the maximum field is used.
+ ==A value of zero in this field means the user can always change their password==.


### Maximum:
> sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:==30==:7:60:15050:
+ This field indicates the maximum number of days the password is valid. 
+ It is used to force users to change their passwords on a regular basis.
+ A value of `30` in this field means the user must change their password at least every 30 days to avoid having their account locked out.
+ Note that if the minimum field is set to `0`, the user may be able to immediately set their password back to the original value, defeating the purpose of forcing the user to change their password every 30 days. 
+ So, if the maximum field is set, the minimum field is ordinarily set as well.
+ For example, a minimum:maximum of `5:30` means the user must change their password every 30 days and, after changing, the user must wait 5 days before they can change their password again.
+ If the `max` field is set to `99999`, the maximum possible value, then the user essentially never has to change their password (because 99999 days is approximately 274 years).


### Warn:
> sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:30:==7==:60:15050::
+ If the maximum field is set, the warn field indicates the number of days before password expiry that the system warns the user. 
+ For example, if the warn field is set to `7`, then any time during the 7 days before the maximum time frame is reached, the user will be warned to change their password during the login processes.
+ The user is only warned at login, so some administrators have taken the approach of setting the warn field to a higher value to provide a greater chance of having a warning issued.
+ If the maximum time frame is set to `99999`, then the warn field is basically useless.


### Inactive:
 > sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:30:7:==60==:15050::
+ If the user ignores the warnings and exceeds the password timeframe, their account will be locked out. 
+ In that case, the inactive field provides the user with a "grace" period in which their password can be changed, but only during the login process.
+ If the inactive field is set to `60`, the user has 60 days to change to a new password. 
+ If they fail to do so, then the administrator would be needed to reset the password for the user.


### Expire:
> sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:30:7:60:==15050==::
+ This field indicates the day the account will expire, represented by the number of days from January 1, 1970. 
+ An expired account is locked, not deleted, meaning the administrator can reset the password to unlock the account.
+ Accounts with expiration dates are commonly provided to temporary employees or contractors. 
+ The account automatically expires after the user's last day of work.
+ When an administrator sets this field, a tool is used to convert from a real date to an Epoch date. 
+ There are also several free converters available on the Internet.


### Reserved:
 > sysadmin:$6$c75ekQWF$.GpiZpFnIXLzkALjDpZXmjxZcIll14OvL2mFSIfnc1aU2cQ/221QL5AX5RjKXpXPJRQ0uVN35TY3/..c7v0.n0:16874:5:30:7:60:15050==::==
+ Currently not used, this field is reserved for future use.



## `getent` command:
+ In addition to the `grep` command, another technique for retrieving user information contained in the `/etc/passwd` and `/etc/shadow` files is to use the `getent` command.
+ One advantage of this command is that it can retrieve account information that is defined locally, in files such as `/etc/passwd` and `/etc/shadow`, or on a network directory server.
+ The general syntax of a `getent` command is:
```
getent database record 
```
+ For example, the following command would retrieve account information for the `sysadmin` user from the `/etc/passwd` file:
```
sysadmin@localhost:~$ getent passwd sysadmin
sysadmin:x:1001:1001:System Administrator,,,,:/home/sysadmin:/bin/bash
```
