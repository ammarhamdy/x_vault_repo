
The `umask` command is a feature that is used to determine default permissions that are set when a file or directory is created. 

Default permissions are determined when the `umask` value is subtracted from the maximum allowable default permissions. 
The maximum default permissions are different for files and directories:

| file        | `rw-rw-rw-` |
| ----------- | ----------- |
| directories | `rwxrwxrwx` |

```sh
am@ubuntu:~$ umask
0002
```
- The first `0` indicates that the `umask` is given as an octal number.
- The second `0` indicates which permissions to subtract from the default ==**user**== owner's permissions.
- The third `0` indicates which permissions to subtract from the default **==group==** owner's permissions.
- The last number `2` indicates which permissions to subtract from the default **==other's==** permissions.

How `umask` Modifies Permissions:
`umask` **subtracts** permissions from the default values.
Formula:
```
Final Permission = Default Permission - umask
```

|`umask`|File Permission (666 - umask)|Directory Permission (777 - umask)|
|---|---|---|
|`0000`|`rw-rw-rw-` (666)|`rwxrwxrwx` (777)|
|`0002`|`rw-rw-r--` (664)|`rwxrwxr-x` (775)|
|`0022`|`rw-r--r--` (644)|`rwxr-xr-x` (755)|
|`0077`|`rw-------` (600)|`rwx------` (700)|

To understand how `umask` works, assume that the `umask` of a file is set to `027` and consider the following:

| File Default | `666`  |
| ------------ | ------ |
| Umask        | `-027` |
| Result       | `640`  |

The `027` `umask` means that new files would receive `640` or 
`rw-r-----` permissions by default

When a new shell is started, the default `umask` will again be in effect.

Permanently changing a user's `umask` requires modifying the `.bashrc` file located in that user's home directory.


----
# Using ACL (More Reliable Approach)




```sh
setfacl [OPTIONS] [ACL_RULE] FILE/DIR
```

|Option|Description|
|---|---|
|`-m`|Modify ACL (add or change permissions)|
|`-x`|Remove ACL for a user/group|
|`-b`|Remove all ACL entries (reset to default)|
|`-d`|Set **default** ACL (applies to new files in a directory)|
|`-R`|Apply ACL **recursively** to all subdirectories and files|
|`-k`|Remove **default** ACL|


```sh
setfacl -m g:developers:rwx /var/www
```


ACL (Access Control List) ensures that any new file created in the directory automatically inherits the **execute** permission.

```sh
setfacl -d -m u::rwx,g::rwx,o::rx ~/autoexec
setfacl -m u::rwx,g::rwx,o::rx ~/autoexec
```
- `setfacl -d -m u::rwx,g::rwx,o::rx ~/autoexec` → Sets **default** permissions so that new files are executable.

- `setfacl -m u::rwx,g::rwx,o::rx ~/autoexec` → Ensures existing files also get execute permissions.



----
configure a directory so that all newly added files automatically become executable

