

The most common reason to create a group is to provide a way for users to share files. 
For example, if several people who work together on the same project and need to be able to collaborate on documents stored in files for the project.


After creating or modifying a group, you can verify the changes by viewing the group configuration information in the `/etc/group` file with the `grep` command. 
If working with network-based authentication services, then the `getent` command can show you both local and network-based groups.

```
grep pattern filename
getent database record
```


For local usage, these commands show the same result, in this case for the `root` group:
```
root@localhost:~# grep root /etc/group
root:x:0:
root@localhost:~# getent group root
root:x:0:
```



---
# Creating A Group


## `groupadd` command:
+ The `groupadd` command can be executed by the root user to create a new group. 
+ The command requires only the name of the group to be created.
+ The `-g` option can be used to specify a group id for the new group:
```bash
root@localhost:~# groupadd -g 1005 research
root@localhost:~# grep research /etc/group
research:x:1005:
```
+ If the `-g` option is not provided, the `groupadd` command will automatically provide a GID for the new group.
+ To accomplish this, the `groupadd` command looks at the `/etc/group` file and uses a number that is one value higher than the current highest GID number.
+ The execution of the following commands illustrates this:
```bash
root@localhost:~# groupadd development
root@localhost:~# grep development /etc/group
development:x:1006:
```



---
# Group ID Considerations


## Guide lines to create group:
+ In some Linux distributions, particularly those based upon Red Hat, when a user ID (UID) is created, a user private group (UPG) is also created with that user as its only member. 
+ In these distributions, the UID and the ID of the UPG are supposed to match (be the same number).
+ Therefore, you should avoid creating GIDs in the same numeric ranges where you expect to create UIDs, to avoid a conflict between a GID you create and a UPG number that is created to match a UID.
+ GIDs under either 500 (RedHat) or 1000 (Debian) are reserved for system use. 
+ There may be times at which you want to assign a lower GID value.
+ To accomplish this, use the `-r` option which assigns the new group a GID that is less than the lowest standard GID:
```
root@localhost:~# groupadd -r sales
root@localhost:~# getent group sales
sales:x:999:
```



---
# Group Naming Considerations



Following these guidelines for group names can help to select a group name that is portable (function correctly with other systems or services):

- The first character of the name should be either an underscore `_` character or a lowercase alphabetic `a`-`z` character.
- Up to 32 characters are allowed on most Linux distributions, but using more than 16 can be problematic as some distributions may not accept more than 16.
- After the first character, the remaining characters can be alphanumeric, a dash `-` character or an underscore `_` character.
- The last character should not be a hyphen `-` character.


Unfortunately, these guidelines are not always enforced.
The problem isn't that the `groupadd` command does not necessarily fail, but that other commands or system services may not work correctly.



----
# Modifying a Group


## Group modification:
+ The `groupmod` command can be used to either change the name of a group with the `-n` option or change the GID for the group with the `-g` option.
+ Changing the name of the group may confuse users who were familiar with the old name and haven't been informed of the new name.
+ However, changing the group name won't cause any problems with accessing files, since the files are owned by GIDs, not group names.
```bash
root@localhost:~# ls -l index.html
-rw-r-----. 1 root sales 0 Aug  1 13:21 index.html
root@localhost:~# groupmod -n clerks sales
root@localhost:~# ls -l index.html
-rw-r-----. 1 root clerks 0 Aug  1 13:21 index.html
```
+ On the other hand, if you change the GID for a group, then all files that were associated with that group will no longer be associated with that group.
+ In fact, all files that were associated with that group will no longer be associated with `any` group name.
+ Instead, these files will be owned by a GID only, as shown below:
```
root@localhost:~# groupmod -g 10003 clerks
root@localhost:~# ls -l index.html
-rw-r-----. 1 root 491 13370 Aug  1 13:21 index.html
```


## Orphaned files:
+ These files with no group name are called orphaned files. To search for all files that are owned by just a GID (not associated with a group name) use the `-nogroup` option of the `find` command:
```
root@localhost:~# find / -nogroup 
/root/index.html
```



---
# Deleting a Group


## Group delete: 
+ If you decide to delete a group with the `groupdel` command, be aware that any files that are owned by that group will become orphaned.


## Supplemental groups:  
+ Only supplemental (تكميلية) groups can be deleted, so if any group that is the primary group for any user, it cannot be deleted. 
+ The administrator can modify which group is a user's primary group, so a group that was being used as a primary group can be made into a supplemental group and then can be deleted.
+ As long as the group to be deleted is not a user's primary group, deleting the group is accomplished by using the `groupdel` command along with the name of the group:
```
root@localhost:~# groupdel clerks
```
