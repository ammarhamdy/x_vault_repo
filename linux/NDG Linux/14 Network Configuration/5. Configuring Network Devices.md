

## To configure the network:
+ When you are configuring network devices, there are two initial questions that you need to ask:
	- Wired or wireless? 
		- Configuring a wireless device is slightly different to configuring a wired device because of some of the additional features typically found on wireless devices (such as security).
	- DHCP or static address?
		- Recall that a DHCP server provides network information, such as your IP address and subnet mask. I
		- f you don't make use of a DHCP server, then you will need to manually provide this information to your host, which is called using a static IP address.



---
# Configuring the Network Using Configuration Files


There will be times when no GUI-based tool is available. 
In those cases, it is helpful to know the configuration files that are used to store and modify network data.



----
# Primary IPv4 Configuration File


On a CentOS system, the primary configuration file for an IPv4 network interface is the `/etc/sysconfig/network-scripts/ifcfg-eth0` file.


```
root@localhost:~# cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE="eth0"
BOOTPROTO=none
NM_CONTROLLED="yes"
ONBOOT=yes
TYPE="Ethernet"
UUID="98cf38bf-d91c-49b3-bb1b-f48ae7f2d3b5"
DEFROUTE=yes
IPV4 _FAILURE_FATAL=yes
IPV6INOT=no
NAME="System eth0"
IPADDR=192.168.1.1
PREFIX=24
GATEWAY=192.168.1.1
DNS1=192.168.1.2
HWADDR=00:50:56:90:18:18
LAST_CONNECT=1376319928
```



----
# Primary IPv6 Configuration File


On a CentOS system, the primary IPv6 configuration file is the same file where IPv4 configuration is stored; the `/etc/sysconfig/network-scripts/ifcfg-eth0` file. 
If you want to have your system have a static IPv6 address, add the following to the configuration file:
```
IPV6INIT=yes
IPV6ADDR=<IPv6 IP Address>
IPV6_DEFAULTGW=<IPv6 IP Gateway Address>
```
If you want your system to be a DHCP IPv6 client, then add the following setting:
```
DHCPV6C=yes
```
You also need to add the following setting to the `/etc/sysconfig/network` file:
```
NETWORKING_IPV6=yes
```


## Restart the network: 
+ The widely accepted method of making changes to a network interface is to take the interface down using a command such as `ifdown eth0`, make the desired changes to the configuration file, and then bring the interface back up and into service with a command such as `ifup eth0`.
+ Another less specific method is to restart the system’s networking entirely, with a command such as `service network restart`, which takes down ALL interfaces, re-reads all related configuration files, and then restarts the networking for the system


----
# Domain Name System (DNS)


When a computer is asked to access a website, such as `www.example.com`, it does not necessarily know what IP address to use. 
For the computer to associate an IP address with the URL or `hostname` request, the computer relies upon the DNS service of another computer. 
Often, the IP address of the DNS server is discovered during the DHCP request, while a computer is receiving important addressing information to communicate on the network.


## Where DNS server stored:
+ The address of the DNS server is stored in the `/etc/resolv.conf` file. 
+ A typical `/etc/resolv.conf` file is automatically generated and looks like the following:
```
sysadmin@localhost:~$ cat /etc/resolv.conf    
```
+ The following example uses the `host` command, which works with DNS to associate a hostname with an IP address. Note that the example server is associated with the IP address `192.168.1.2` by the DNS server:
```
am@ubuntu:~$ host example.com
example.com has address 93.184.216.34
example.com has IPv6 address 2606:2800:220:1:248:1893:25c8:1946
example.com mail is handled by 0 .  
```



---
# Network Configuration Files


## Place of Network Configuration Files:
+ Name resolution on a Linux host is accomplished by 3 critical files: 
	+ `/etc/hosts` files.
	+ `/etc/resolv.conf` files. 
	+ `/etc/nsswitch.conf` files. 
+ Together, they describe the location of name service information, the order in which to check resources, and where to go for that information.



| Files                | Explanation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/etc/hosts`         | This file contains a table of hostnames to IP addresses. It can be used to supplement a DNS server.<br><br>```<br>sysadmin@localhost:~$ cat /etc/hosts  <br>127.0.0.1       localhost<br>```                                                                                                                                                                                                                                                                                                                                                                                |
| `/etc/resolv.conf`   | This file contains the IP addresses of the name servers the system should consult in any attempt to resolve names to IP addresses. These servers are often DNS servers. It also can contain additional keywords and values that can affect the resolution process.<br><br>```<br>sysadmin@localhost:~$ cat /etc/resolv.conf  <br>nameserver 127.0.0.11<br>```                                                                                                                                                                                                               |
| `/etc/nsswitch.conf` | This file can be used to modify where hostname lookups occur. It contains a particular entry that describes in what order name resolution sources are consulted.<br><br>```<br>sysadmin@localhost:~$ cat /etc/nsswitch.conf <br># /etc/nsswitch.conf<br># <br>```<br><br>Output Omitted...<br><br>hosts:          files dns<br><br>Output Omitted...<br><br>The `/etc/hosts` file is searched first, the DNS server second:<br><br>```<br>hosts: files dns <br>```<br><br>The DNS server would be searched first, local files second:<br><br>```<br>hosts: dns files<br>``` |

## Get DNS respond:
+ Commands or programs on the system, such as the browser, request a connection with a remote computer by DNS name. 
+ Then the system consults various files in a particular order to attempt to resolve that name into a usable IP address.
+ First, the `/etc/nsswitch.conf` file is consulted:
```
hosts:		files dns
```
+ This line indicates that the system should consult local files first in an attempt to resolve hostnames, which means that the `/etc/hosts` file will be parsed for a match to the requested name.
+ Second, the system will consult the `/etc/hosts` file to attempt to resolve the name. If the name matches an entry in `/etc/hosts`, it is resolved.
+ It will not failover (or continue) to the DNS option, even if the resolution is inaccurate. 
+ This can occur if the entry in `/etc/hosts` points to a non-assigned IP address.
+ Third, if the local `/etc/hosts` file doesn’t result in a match, the system will use the configured DNS server entries contained in the `/etc/resolv.conf` file to attempt to resolve the name.
+ The `/etc/resolv.conf` file should contain at least two entries for name servers, such as the example file below:
```
nameserver 10.0.2.3
nameserver 10.0.2.4
```
+ The DNS resolution system will use the first name server for an attempted lookup of the name. If that is unavailable, or a timeout period is reached, the second server will then be queried for the name resolution. 
+ If a match is found, it is returned to the system and used for initiating a connection and is also placed in the DNS cache for a configurable time period.


