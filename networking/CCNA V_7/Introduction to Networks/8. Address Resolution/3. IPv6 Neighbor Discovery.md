# Introduction for ND:
+ [(YouTube:IPv6 Neighbor Discovery](https://www.youtube.com/watch?v=hJ7Mc3LLWXI)



---
# IPv6 Neighbor Discovery Messages


## Neighbor Discovery protocol:
+ IPv6 Neighbor Discovery protocol is sometimes referred to as ND or NDP. 
+ ND provides address resolution, router discovery, and redirection services for IPv6 using ICMPv6. 
+ ICMPv6 ND uses five ICMPv6 messages to perform these services:
	+ Neighbor Solicitation (الإغراء) messages.
	+ Neighbor Advertisement (إعلان) messages.
	+ Router Solicitation messages.
	+ Router Advertisement messages.
	+ Redirect Message.


## Device to device message:
+ Neighbor Solicitation and Neighbor Advertisement messages are used for device-to-device messaging such as address resolution (similar to ARP for IPv4):
+ ![[Pasted image 20230415174021.png]]


## Device to router:
+ Router Solicitation and Router Advertisement messages are for messaging between devices and routers. 
+ Typically router discovery is used for dynamic address allocation and stateless address autoconfiguration (SLAAC).
+ ![[Pasted image 20230415174143.png]]


## Redirect Message:
+ The fifth ICMPv6 ND message is a redirect message which is used for better next-hop selection.


## Request for Comment (RFC):
+ IPv6 ND is defined in the IETF RFC 4861.



---
# IPv6 Neighbor Discovery - Address Resolution


## Like ARP:
+ Much like ARP for IPv4, IPv6 devices use IPv6 ND to determine the MAC address of a device that has a a known IPv6 address.
+ ICMPv6 Neighbor Solicitation and Neighbor Advertisement messages are used for MAC address resolution.
+ This is similar to ARP Requests and ARP Replies used by ARP for IPv4. 
+ For example, assume PC1 wants to ping PC2 at IPv6 address 2001:db8:acad::11, To determine the MAC address for the known IPv6 address, PC1 sends an ICMPv6 Neighbor Solicitation message:
	+ ![[Pasted image 20230415174927.png]]


## How Neighbor Solicitation messages works?
+ ICMPv6 Neighbor Solicitation messages are sent using special Ethernet and IPv6 multicast addresses. 
+ This allows the Ethernet NIC of the receiving device to determine whether the Neighbor Solicitation message is for itself _without having to send it to the operating system for processing_.



---
# Practice


![[9.3.4-packet-tracer---ipv6-neighbor-discovery (1).pka]]



---
# Quize


## What will a Layer 2 switch do when the destination MAC address of a received frame is not in the MAC table?
+ A Layer 2 switch determines how to handle incoming frames by using its MAC address table. When an incoming frame contains a destination MAC address that is not in the table, the switch forwards the frame out all ports, except for the port on which it was received.
+ It forwards the frame out of all ports except for the port at which the frame was received.


## Which two ICMPv6 messages are used during the Ethernet MAC address resolution process?
+ router solicitation and neighbor advertisement. 