# IPv4 Packet Header


## Use of IPva4 header:
+ The IPv4 packet header is used to ensure that this packet is delivered to its next stop on the way to its destination end device.


## IPv4 packet header fields:
+ The binary values of each field identify various settings of the IP packet.
+ Protocol header diagrams, which are read left to right, and top down.
![[Pasted image 20230326173916.png]]
+ See [Sample IPv4 Headers in Wireshark - YouTube](https://www.youtube.com/watch?v=LQNwGM_TCRU)


### Version field:
+ Version - Contains a **==4-bit==** binary value set to `0100` (4 in decimal) that identifies this as an IPv4 packet.


### Internet header length field:
+ It is the length of the IPv4 header no the total packet.
+ Common value 20 Bytes.


### Total length field:
+ The length of the while package.


### Flag field:
+ This field determine if this package need a fragmentation process or this package not large enough.


### Differentiated Services or DiffServ (DS):
+ Formerly called the ==type of service (ToS)== field, the DS field is an **==8-bit==** field ==used to determine the **priority** of each packet==. 
+ The six most significant bits of the DiffServ field are the differentiated services code point (DSCP) bits and the last two bits are the explicit congestion (ازدحام) notification (ECN) bits.


### Time to Live field:
+ Time to Live (TTL) contains an 8-bit binary value that is used to limit the lifetime of a packet. 
+ The source device of the IPv4 packet sets the initial TTL value.
+ ==**It is decreased by one each time the packet is processed by a router.**==
+ If the TTL field decrements to zero, the router discards the packet and sends an Internet Control Message Protocol (ICMP) Time Exceeded message to the source IP address.
+ Because the router decrements the TTL of each packet, the router must also recalculate the Header Checksum.


### Protocol field:
+ This field is used to identify the next level protocol.
+ This 8-bit binary value indicates the data payload type that the packet is carrying, which enables the network layer to pass the data to the appropriate upper-layer protocol.
+ Common values include ICMP (1), TCP (6), and UDP (17).


### Header Checksum field:
+ This is used to detect corruption in the IPv4 header.


### Source IPv4 Address field: 
+ This contains a 32-bit binary value that represents the source IPv4 address of the packet. 
+ The source IPv4 address is always a unicast address.


### Destination IPv4 Address field:
+ This contains a 32-bit binary value that represents the destination IPv4 address of the packet.
+ The destination IPv4 address is a unicast, multicast, or broadcast address.


## Source and destination:
+ The source and destination IPv4 addresses remain the same while travelling from source to destination.