# The Network Layer


## Netwoke layer Protocols:
+ OSI Layer 3, provides services to allow end devices to exchange data across networks.
+ IP version 4 (IPv4) and IP version 6 (IPv6) are the principle network layer communication protocols.
+ Other network layer protocols include:
	+ Routing protocols such as Open Shortest Path First (OSPF).
	+ Messaging protocols such as Internet Control Message Protocol (ICMP).


## Layer 3 Operations:
+ Addressing end devices.
+ Encapsulation.
+ Routing.
+ De-encapsulation.


### Addressing end devices:
+ End devices must be configured with a unique IP address for identification on the network.


### Encapsulation:
+ The network layer encapsulates the protocol data unit (PDU) from the transport layer into a packet.
+ The encapsulation process adds IP header information, such as the IP address of the source (sending) and destination (receiving) hosts.
+ The encapsulation process is performed by the **source** of the IP packet.


### Routing:
+ The network layer provides services to direct the packets to a destination host on another network.
+ **==To travel to other networks, the packet must be processed by a router==**.
+ The role of the router is to select the best path and direct packets toward the destination host in a process known as routing.
+ A packet may cross many routers before reaching the destination host.
+ Each router a packet crosses to reach the destination host is called a hop.


### De-encapsulation:
+ When the packet arrives at the network layer of the destination host, the host checks the IP header of the packet.
+ If the destination IP address within the header matches its own IP address, the IP header is removed from the packet.
+ After the packet is de-encapsulated by the network layer, the resulting Layer 4 PDU is passed up to the appropriate service at the transport layer.
+ The de-encapsulation process is performed by the destination host of the IP packet.



---
# IP Encapsulation


## Encapsulation:
+ IP encapsulates the transport layer segment or other data by adding an IP header.
+ The IP header is used to deliver the packet to the destination host.
+ ![[Pasted image 20230321205130.png]]


## Journey of packet:
+ The IP header is examined by Layer 3 devices (i.e., routers and Layer 3 switches) as it travels across a network to its destination.
+ **==Note, that the IP addressing information remains the same from the time the packet leaves the source host until it arrives at the destination host, except when translated by the device performing Network Address Translation (NAT) for IPv4==**.



---
# Characteristics of IP


## What is the IP do:
+ IP was designed as a protocol with low overhead.
+ It provides only the functions that are necessary to deliver a packet from a source to a destination over an interconnected system of networks.
+ The protocol was not designed to track and manage the flow of packets. 
+ These functions, if required, are performed by other protocols at other layers, primarily TCP at Layer 4.


## characteristics of IP:
+ Connectionless:
	+ There is no connection with the destination established before sending data packets.
+ Best Effort:
	+ IP is inherently (بطبيعته) unreliable (غير جدير بالثقة) because packet delivery is not guaranteed.
+ Media Independent:
	+ Operation is independent of the medium (i.e., copper, fiber-optic, or wireless) carrying the data.


### Connectionless:
+ IP is connectionless, meaning that no dedicated end-to-end connection is created by IP before data is sent.
+ Connectionless communication is conceptually similar to sending a letter to someone without notifying the recipient in advance.


### Best Effort:
+ IP also does not require additional fields in the header to maintain an established connection. 
+ This process greatly reduces the overhead of IP.
+ The IP protocol does not guarantee that all packets that are delivered are, in fact, received.
+ As an unreliable network layer protocol, IP does not guarantee that all sent packets will be received.
+ Other protocols manage the process of tracking packets and ensuring their delivery.


### Media Independent:
+ Unreliable means that IP does not have the capability to manage and recover from undelivered or corrupt packets.
+ This is because while IP packets are sent with information about the location of delivery, they do not contain information that can be processed to inform the sender whether delivery was successful.
+ IP provides no capability for packet retransmissions if errors occur.
+ IP operates independently of the media that carry the data at lower layers of the protocol stack.








