# Router Packet Forwarding Decision


## Routers and routing tables:
+ Routers also contain routing tables. 
+ When a host sends a packet to another host, it consults (يستشير) its routing table to determine where to send the packet. 
+ If the destination host is on a remote network, the packet is forwarded to the default gateway, which is usually the local router.


## When a packet arrives on a router?
+ What happens when a packet arrives on a router interface:
	+ The router examines the destination IP address of the packet and searches its routing table to determine where to forward the packet.
	+ The routing table contains a list of all known network addresses (prefixes) and where to forward the packet.
	+ These entries are known as route entries or routes. 
	+ The router will forward the packet using the best (longest) matching route entry.
+ ![[Pasted image 20230409174912.png]]
+ ![[Pasted image 20230409174930.png]]



---
# IP Router Routing Table


## Content of the table:
+ The routing table of the router contains network route entries listing all the possible known network destinations.
+ The routing table stores three types of route entries:
	+ Directly-connected networks.
	+ Remote networks.
	+ Default route.


### Directly-connected networks:
+ These network route entries are active router interfaces.
+ Routers add a directly connected route when an interface is configured with an IP address and is activated. 
+ Each router interface is connected to a different network segment. 


### Remote networks:
+ These network route entries are connected to other routers.
+ Routers learn about remote networks either by being explicitly configured by an administrator or by exchanging route information using a dynamic routing protocol. 


### Default route:
+ Like a host, most routers also include a default route entry, a gateway of last resort. 
+ The default route is used when there is no better (longer) match in the IP routing table. 


### Example for routing:
+ ![[Pasted image 20230409175556.png]]
+ The directly-connected networks in the R1 IPv4 routing table would be 192.168.10.0/24 and 209.165.200.224/30.
+ The remote network in the R1 IPv4 routing table would be 10.1.1.0/24.
+ The R1 IPv4 routing table would most likely include a default route to forward all packets to router R2.


## How does router learn:
+ A router can learn about remote networks in one of two ways:
	+ **Manually**: 
		+ Remote networks are manually entered into the route table using static routes.
	+ **Dynamically**:
		+ Remote routes are automatically learned using a dynamic routing protocol.



---
# Static Routing


## What is a static routing:
+ Static routes are route entries that are manually configured.


## Assign the static routing:
```
R1(config)# ip route 10.1.1.0 255.255.255.0 209.165.200.226 
```
+ If that path is no longer available, R1 would need to be reconfigured with a new static route to the 10.1.1.0/24 network.


## Characteristics of static routing:
+ Static routing has the following characteristics:
	+ A static route must be configured manually.
	+ The administrator needs to reconfigure a static route if there is a change in the topology and the static route is no longer viable.
	+ A static route is appropriate for a small network and when there are few or no redundant links.



---
# Dynamic Routing


## What is a dynamic routing:
+ A dynamic routing protocol allows the routers to automatically learn about remote networks, including a default route, from other routers. 
+ Routers that use dynamic routing protocols automatically share routing information with other routers and compensate (يكافئ) for any topology changes without involving the network administrator.
+ If there is a change in the network topology, routers share this information using the dynamic routing protocol and automatically update their routing tables.
+ Dynamic routing protocols include OSPF and Enhanced Interior Gateway Routing Protocol (EIGRP).



## OSPF as example for routing:
+ ![[Pasted image 20230409181010.png]]
+ R1 is using the routing protocol OSPF to let R2 know about the 192.168.10.0/24 network.
+ R2 is using the routing protocol OSPF to let R1 know about the 10.1.1.0/24 network.



## What does dynamic routing do:
+ routing protocol will automatically do as follows:
	+ Discover remote networks.
	+ Maintain up-to-date routing information.
	+ Choose the best path to destination networks.
	+ Attempt to find a new best path if the current path is no longer available.
+ ![[Pasted image 20230409181334.png]]


## See:
+ [IPv4 Router Routing Tables - YouTube](https://www.youtube.com/watch?v=rj6600PcX-0)



---
# Introduction to an IPv4 Routing Table


## Show routing table command:
+ The `show ip route` privileged EXEC mode command is used to view the IPv4 routing table on a Cisco IOS router. 
+ At the beginning of each routing table entry is a code that is used to identify the type of route or how the route was learned. 
+ Common route sources (codes) include these:
	+ **L**: Directly connected local interface IP address.
	+ **C**: Directly connected network.
	+ **S**: Static route was manually configured by an administrator.
	+ **O**: OSPF.
	+ **D**: EIGRP.


## Example for show ip route command.
+ ![[Pasted image 20230409193431.png]]
+ ![[Pasted image 20230409193535.png]]
+ The routing table displays all of the known IPv4 destination routes for R1.
+ The two directly connected networks in this example are `192.168.10.0/24` and `209.165.200.224/30`.
+ Routers R1 and R2 are also using the OSPF dynamic routing protocol to exchange router information. 
+ In the example routing table, R1 has a route entry for the `10.1.1.0/24` network that it learned dynamically from router R2 via the OSPF routing protocol.
+ A default route has a network address of all zeroes. For example, the IPv4 network address is `0.0.0.0`.
+ A static route entry in the routing table begins with a code of **S***, as highlighted in the example.




